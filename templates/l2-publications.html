{% extends "wrap-content.html" %}
{% load staticfiles %}

{% block local_css %}
	<!-- Start WOWSlider.com HEAD section -->
	<link rel="stylesheet" type="text/css" href="{% static 'wowslider/engine1/style.css' %}" />	
	<!-- End WOWSlider.com HEAD section -->
{% endblock local_css %}

{% block jumbotron %}
	{% if not subpage %}
		{% if featured %}	
		<div class="jumbotron">
			<!-- Start WOWSlider.com -->
			<div id="wowslider-container1">
				<div class="ws_images">
					<ul>
						{% for f in featured %} 
						<li><a href="{{ f.get_absolute_url }}">
							<img src="{{MEDIA_URL}}img/{{ f.getuid }}lg.png" alt="{{ f.title }}" title="{{ f.headline_tag }}" id="wows1_{{ forloop.counter0 }}"/>
						</li></a>
						{% endfor %}
					</ul>
				</div>
			</div>
			<!-- End WOWSlider.com -->
		</div>
		{% endif %}
	{% endif %}
{% endblock jumbotron %}

{% block pageheading %}
	{% if subpage %}<a href="/publications"><span class="glyphicon glyphicon-arrow-left"></span></a> {% endif %} Publications
	<small> 
		{% if subpage %}			
			{{ subpage|title }} 
		{% else %}
			Featured
		{% endif %} 
		<span class="badge">{{ items|length }}</span>
	</small>
{% endblock pageheading %}

{% block subheadlines %}  
<ul class="nav nav-pills nav-justified"> 
	<a href="journals"><div class="col-xs-12 col-md-3"><li class="shadowboxed category">Journals</li></div></a>
	<a href="monographs"><div class="col-xs-12 col-md-3"><li class="shadowboxed category">Monographs</li></div></a>
	<a href="teaching-materials"><div class="col-xs-12 col-md-3"><li class="shadowboxed category">Teaching<br>Materials</li></div></a>
	<a href="pragmatics"><div class="col-xs-12 col-md-3"><li class="shadowboxed category">Pragmatics</li></div></a>
	<a href="networks"><div class="col-xs-12 col-md-3"><li class="shadowboxed category">Networks</li></div></a>
	<a href="media"><div class="col-xs-12 col-md-3"><li class="shadowboxed category">Physical<br>Media</li></div></a>
	<a href="listing"><div class="col-xs-12 col-md-3"><li class="shadowboxed category">Full<br>Listing</li></div></a>
</ul>
{% endblock subheadlines %}

{% block stories %}

{% if subpage|title != "Listing" %}
	<div id="dyno" class="container">
		{% for p in items %}

			<a href="{{ p.get_absolute_url }}">
			<div class="listing shadowboxed">
				<p> <img src="{{MEDIA_URL}}img/{{p.getuid}}icon.png"> </p>
				<p> {{ p.title | safe }}</p>	
				<p> {{ p.description | safe | truncatewords_html:4 }} </p>
			</div>
			</a>
		{% endfor %}
	</div>
{% else %}
	{% for p in items %}
		{% ifchanged p.category %} <div class="row"><h3><small>{{ p.category }}</small> </h3></div> {% endifchanged %}
		<div class="row enchilada {% cycle 'shade' 'noshade' %}">
			<a href="{{ p.get_absolute_url }}">
			<div class="col-md-1">
				{{ p.year }}
			</div>
			<div class="col-md-3">
				{{ p.title | safe }}
			</div>
			<div class="col-md-8">
				{{ p.description | safe | truncatewords_html:20 }} 
			</div>
			</a>
		</div>
	{% endfor %}	
{% endif %}

{% endblock stories %}

{% block local_js %}
	<script type="text/javascript" src="{% static 'wowslider/engine1/wowslider.js' %}"></script>
	<script type="text/javascript" src="{% static 'wowslider/engine1/script.js' %}"></script>
{% endblock local_js %}

{% block customjavascript %}
jQuery(window).on('load', function(){ 
	var $ = jQuery;
	var container = document.querySelector('#dyno');
	var msnry = new Masonry( container, {
	  // options
	  columnWidth: 230,
	  itemSelector: '.listing',
	  gutter: 10,
	  isFitWidth: 'true'
	});
})
{% endblock customjavascript %}

