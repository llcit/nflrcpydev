{% extends "wrap-content.html" %}
{% load staticfiles %}

{% block local_css %}
	<!-- Start WOWSlider.com HEAD section -->
	<link rel="stylesheet" type="text/css" href="{% static 'wowslider/engine1/style.css' %}" />	
	<!-- End WOWSlider.com HEAD section -->
{% endblock local_css %}


{% block jumbotron %}
	{% if false %}
		{% if featured %}	
		<div class="jumbotron">
			<!-- Start WOWSlider.com -->
			<div id="wowslider-container1">
				<div class="ws_images">
					<ul>
						{% for f in featured %} 
						<li><a href="{{ f.get_absolute_url }}">
							<img src="{{MEDIA_URL}}img/{{ f.getuid }}lg.png" alt="{{ f.title }}" title="{{ f.headline_tag }}" id="wows1_{{ forloop.counter0 }}"/>
						</li></a>
						{% endfor %}
					</ul>
				</div>
			</div>
			<!-- End WOWSlider.com -->
		</div>
		{% endif %}
	{% endif %}
{% endblock jumbotron %}

{% block pageheading %}
<div class="page-header"><h1>
	{% if language_name %}
		<a href="/languages"><span class="glyphicon glyphicon-arrow-left"></span></a>
	{% endif %}Languages 
	<small> 
		{% if language_name %} 
			{{ language_name|title }}
			<small>
			<span class="badge">{{publications|length}}</span><span><a href="#publications"> Publication{{ publications|length|pluralize }}</a></span>
			<span> | </span>
			<span class="badge">{{projects|length}}</span><span><a href="#projects"> Project{{ projects|length|pluralize }}</a></span>
			<span> | </span>
			<span class="badge">{{prodevs|length}}</span><span><a href="#prodev"> Professional Development Project{{ prodevs|length|pluralize }}</a></span>
			</small>
		{% else %} 
			choose a language 
		{% endif %}
	</small>
</h1></div>
	
{% endblock pageheading %}

{% block subheadlines %}
<ul class="nav nav-pills nav-justified"> 
	<a href="chinese" class="navbar-link"><div class="col-xs-12 col-md-3"><li class="shadowboxed category"><h3>Chinese</h3></li></div></a>
	<a href="japanese" class="navbar-link"><div class="col-xs-12 col-md-3"><li class="shadowboxed category"><h3>Japanese</h3></li></div></a>
	<a href="korean" class="navbar-link"><div class="col-xs-12 col-md-3"><li class="shadowboxed category"><h3>Korean</h3></li></div></a>
	<a href="khmer" class="navbar-link"><div class="col-xs-12 col-md-3"><li class="shadowboxed category"><h3>Khmer</h3></li></div></a>
	<a href="filipino" class="navbar-link"><div class="col-xs-12 col-md-3"><li class="shadowboxed category"><h3>Filipino</h3></li></div></a>
	<a href="samoan" class="navbar-link"><div class="col-xs-12 col-md-3"><li class="shadowboxed category"><h3>Samoan</h3></li></div></a>
</ul>
{% endblock subheadlines %}

{% block stories %}

<!-- Default listing if language is not selected -->
{% if featured %}
	<div id="dyno0" class="container">
		{% for p in featured %}	
			<a href="{{ p.get_absolute_url }}">
				<div class="listing shadowboxed">
					<p> <img src="{{MEDIA_URL}}img/{{ p.image }}"> </p>
					<h4>{{ p.title | safe | truncatewords:8 }}</h4>
					<h5>{{ p.thumbnail_desc | safe | truncatewords_html:140 }}</h5>
				</div>
			</a>
		{% endfor %}		
	</div>	
{% endif %}

{% if publications or prodevs or projects %}

	
	<div id="item-listing" class="col-md-12">
		<span id="publications" class="adjusted-anchor"></span>
		<p><h3>Publication{{ publications|length|pluralize }}<small><a href="#top"> back to top</a></small></h3></p>
		<div id="dyno1" class="container">
			{% for p in publications %}	
				<a href="{{ p.get_absolute_url }}">
					<div class="listing shadowboxed">
						<p> <img src="{{MEDIA_URL}}img/{{ p.image }}"> </p>
						<h4>{{ p.title | safe | truncatewords:8 }}</h4>
						<h5>{{ p.thumbnail_desc | safe | truncatewords_html:140 }}</h5>	
					</div>
				</a>
			{% endfor %}		
		</div>

	
		<span id="projects" class="adjusted-anchor"></span>
		<p><h3>Project{{ projects|length|pluralize }}<small><a href="#top"> back to top</a></small></h3></p>
		<div id="dyno2" class="container">
			{% for p in projects %}	
				<a href="{{ p.get_absolute_url }}">
					<div class="listing shadowboxed">
						<p> <img src="{{MEDIA_URL}}img/{{ p.image }}"> </p>
						<h4>{{ p.title | safe | truncatewords:8 }}</h4>
						<h5>{{ p.thumbnail_desc | safe | truncatewords_html:140 }}</h5>	
					</div>
				</a>
			{% endfor %}		
		</div>

		<span id="prodev" class="adjusted-anchor"></span>
		<p><h3>Workshops and Conference{{ prodevs|length|pluralize }}<small><a href="#top"> back to top</a></small></h3></p>
		<div id="dyno3" class="container">
			{% for p in prodevs %}	
				<a href="{{ p.get_absolute_url }}">
					<div class="listing shadowboxed">
						<p> <img src="{{MEDIA_URL}}img/{{ p.image }}"> </p>
						<h4>{{ p.title | safe | truncatewords:8 }}</h4>
						<h5>{{ p.thumbnail_desc | safe | truncatewords_html:140 }}</h5>
					</div>
				</a>
			{% endfor %}		
		</div>

	</div>

{% endif %}
{% endblock stories %}

{% comment %}
{% block local_js %}
	<script type="text/javascript" src="{% static 'wowslider/engine1/wowslider.js' %}"></script>
	<script type="text/javascript" src="{% static 'wowslider/engine1/script.js' %}"></script>
{% endblock local_js %}
{% endcomment %}

{% block customjavascript %}
jQuery(window).on('load', function(){
	var $ = jQuery;
	var containers = ['#dyno0', '#dyno1', '#dyno2', '#dyno3'];	
	for (i in containers) {
		containers[i] = document.querySelector(containers[i]);
		if(containers[i]) {			
			msnry = new Masonry( containers[i], {
			  // options
			  columnWidth: 230,
			  itemSelector: '.listing',
			  gutter: 40,
			  isFitWidth: 'true'
			});
		}
	}
})
{% endblock customjavascript %}